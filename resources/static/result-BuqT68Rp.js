import{F as X,G as Y,z as O,H as Z,as as J,d as H,T as Q,S as x,a6 as K,c as u,C as I,I as A,r as P,Z as tt,n as L,o as et,a as h,b as p,e as c,f as j,bu as B,w as g,i as nt,g as d,q as rt,B as at,M as it,h as $,aL as E,bv as V,j as _,bw as ot,bf as v}from"./index-DgoIMJKS.js";import{a as lt,f as st,S as dt,h as ct,i as ut,_ as ft,j as pt}from"./task-DC2NDpku.js";import"./index-BGcIhmhP.js";const gt=e=>{const{componentCls:t,sizePaddingEdgeHorizontal:n,colorSplit:r,lineWidth:a}=e;return{[t]:O(O({},Z(e)),{borderBlockStart:`${a}px solid ${r}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",margin:`0 ${e.dividerVerticalGutterMargin}px`,verticalAlign:"middle",borderTop:0,borderInlineStart:`${a}px solid ${r}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${e.dividerHorizontalGutterMargin}px 0`},[`&-horizontal${t}-with-text`]:{display:"flex",alignItems:"center",margin:`${e.dividerHorizontalWithTextGutterMargin}px 0`,color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${r}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${a}px solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${t}-with-text-left`]:{"&::before":{width:"5%"},"&::after":{width:"95%"}},[`&-horizontal${t}-with-text-right`]:{"&::before":{width:"95%"},"&::after":{width:"5%"}},[`${t}-inner-text`]:{display:"inline-block",padding:"0 1em"},"&-dashed":{background:"none",borderColor:r,borderStyle:"dashed",borderWidth:`${a}px 0 0`},[`&-horizontal${t}-with-text${t}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${t}-dashed`]:{borderInlineStartWidth:a,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${t}-with-text`]:{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize},[`&-horizontal${t}-with-text-left${t}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${t}-inner-text`]:{paddingInlineStart:n}},[`&-horizontal${t}-with-text-right${t}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${t}-inner-text`]:{paddingInlineEnd:n}}})}},mt=X("Divider",e=>{const t=Y(e,{dividerVerticalGutterMargin:e.marginXS,dividerHorizontalWithTextGutterMargin:e.margin,dividerHorizontalGutterMargin:e.marginLG});return[gt(t)]},{sizePaddingEdgeHorizontal:0}),vt=()=>({prefixCls:String,type:{type:String,default:"horizontal"},dashed:{type:Boolean,default:!1},orientation:{type:String,default:"center"},plain:{type:Boolean,default:!1},orientationMargin:[String,Number]}),ht=H({name:"ADivider",inheritAttrs:!1,compatConfig:{MODE:3},props:vt(),setup(e,t){let{slots:n,attrs:r}=t;const{prefixCls:a,direction:s}=Q("divider",e),[m,y]=mt(a),w=x(()=>e.orientation==="left"&&e.orientationMargin!=null),S=x(()=>e.orientation==="right"&&e.orientationMargin!=null),C=x(()=>{const{type:o,dashed:i,plain:b}=e,f=a.value;return{[f]:!0,[y.value]:!!y.value,[`${f}-${o}`]:!0,[`${f}-dashed`]:!!i,[`${f}-plain`]:!!b,[`${f}-rtl`]:s.value==="rtl",[`${f}-no-default-orientation-margin-left`]:w.value,[`${f}-no-default-orientation-margin-right`]:S.value}}),z=x(()=>{const o=typeof e.orientationMargin=="number"?`${e.orientationMargin}px`:e.orientationMargin;return O(O({},w.value&&{marginLeft:o}),S.value&&{marginRight:o})}),k=x(()=>e.orientation.length>0?"-"+e.orientation:e.orientation);return()=>{var o;const i=K((o=n.default)===null||o===void 0?void 0:o.call(n));return m(u("div",I(I({},r),{},{class:[C.value,i.length?`${a.value}-with-text ${a.value}-with-text${k.value}`:"",r.class],role:"separator"}),[i.length?u("span",{class:`${a.value}-inner-text`,style:z.value},[i]):null]))}}}),bt=J(ht);var _t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"};function N(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){xt(e,a,n[a])})}return e}function xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=function(t,n){var r=N({},t,n.attrs);return u(A,N({},r,{icon:_t}),null)};D.displayName="ArrowDownOutlined";D.inheritAttrs=!1;var yt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"};function U(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){wt(e,a,n[a])})}return e}function wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(t,n){var r=U({},t,n.attrs);return u(A,U({},r,{icon:yt}),null)};R.displayName="ArrowUpOutlined";R.inheritAttrs=!1;var St={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"};function G(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){$t(e,a,n[a])})}return e}function $t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(t,n){var r=G({},t,n.attrs);return u(A,G({},r,{icon:St}),null)};T.displayName="ReloadOutlined";T.inheritAttrs=!1;function Ot(e){return self.navigator.permissions.query({name:"clipboard-write"}).then(t=>t.state==="granted"||t.state==="prompt"?self.navigator.clipboard.writeText(e):Promise.reject(new Error("用户拒绝访问")))}const Ct={class:"p-4 h-full flex-col"},zt={class:"space-x-xl"},kt={class:"flex"},Mt={class:"flex ml-1"},Pt={key:0,class:"grid gap-4 grid-cols-[repeat(auto-fill,minmax(200px,1fr))] mt-4 max-h-full"},jt=["src"],Bt=["title"],At={class:"flex justify-between text-sm mb-1"},Dt={class:"text-red-500 font-bold"},Rt={class:"line-through text-gray-400"},Tt={class:"text-xs text-gray-500 mb-1"},It={class:"text-xs text-gray-500 mb-1"},Lt={class:"flex"},Et={class:"text-xs text-gray-500 mb-1"},Vt={class:"text-xs text-gray-500"},Nt={class:"text-xs text-blue-500 w-fit ml-auto",title:"商品链接"},Ut=["href"],Gt=["onClick"],Ht={key:1,class:"mt-4 text-gray-400"},Yt=H({__name:"result",setup(e){const t=lt(),n=P(),r=P(null),a=P(!1),s=tt({page:1,limit:30,sort_by:"crawl_time",recommended_only:!1,order:"asce"}),m=async(o,i)=>{if(o!==void 0){a.value=!0;try{r.value=await ct(Number(o),i)}finally{a.value=!1}}},y=()=>{n.value!==void 0&&m(n.value,s)},w=o=>{const i=`https://pages.goofish.com/sharexy?loadingVisible=false&bft=item&bfs=idlepc.item&spm=a21ybx.item.0.0&bfp=%7B%22id%22%3A${o}%7D`;Ot(i).then(()=>{$.success("复制成功")}).catch(()=>{$.success("复制失败: 无权限")})},S=()=>{n.value!==void 0&&it.confirm({title:"删除结果",content:"删除后不可恢复，确定删除？",async onOk(){try{await ut(n.value),r.value=null,s.page=1,$.success("删除成功")}catch{$.error("删除失败")}}})},C=o=>{n.value!==void 0&&m(n.value,{...s,page:o})},z=o=>{n.value!==void 0&&m(n.value,{...s,sort_by:o})},k=()=>{s.order=s.order==="asce"?"desc":"asce",n.value!==void 0&&m(n.value,s)};return L(n,o=>{s.page=1,o!==void 0&&m(o,s)}),L(()=>t.tasks,o=>{!n.value&&o.length&&(n.value=o[0].task_id)},{immediate:!0}),et(()=>{n.value!==void 0&&m(n.value,s)}),(o,i)=>{const b=pt,f=st,M=at,W=bt,q=dt,F=ft;return p(),h("div",Ct,[c("div",zt,[u(f,{value:d(n),"onUpdate:value":i[0]||(i[0]=l=>nt(n)?n.value=l:null),placeholder:"选择任务",class:"w-72 mb-4"},{default:g(()=>[(p(!0),h(E,null,V(d(t).tasks,l=>(p(),j(b,{key:l.task_id,value:l.task_id},{default:g(()=>[_(v(l.task_name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"]),u(M,{type:"primary",loading:d(a),icon:rt(d(T)),onClick:y},{default:g(()=>[...i[5]||(i[5]=[_("刷新",-1)])]),_:1},8,["loading","icon"]),u(M,{danger:"",type:"primary",onClick:i[1]||(i[1]=()=>S())},{default:g(()=>[...i[6]||(i[6]=[_("删除结果",-1)])]),_:1})]),c("div",kt,[c("div",null,[i[10]||(i[10]=c("span",null,"排序: ",-1)),u(f,{value:d(s).sort_by,"onUpdate:value":i[2]||(i[2]=l=>d(s).sort_by=l),onSelect:z,class:"w-30"},{default:g(()=>[u(b,{value:"price"},{default:g(()=>[...i[7]||(i[7]=[_("价格",-1)])]),_:1}),u(b,{value:"publish_time"},{default:g(()=>[...i[8]||(i[8]=[_("发布时间",-1)])]),_:1}),u(b,{value:"crawl_time"},{default:g(()=>[...i[9]||(i[9]=[_("抓取时间",-1)])]),_:1})]),_:1},8,["value"])]),c("div",Mt,[u(M,{type:"text",class:"p-0",onClick:k},{default:g(()=>[(p(),j(ot(d(s).order==="asce"?d(R):d(D))))]),_:1})])]),u(q,{spinning:d(a),wrapperClassName:"flex-1 h-0 overflow-auto"},{default:g(()=>[d(r)?.items?.length?(p(),h("div",Pt,[(p(!0),h(E,null,V(d(r).items,l=>(p(),h("div",{key:l.商品信息.商品ID,class:"border border-gray-200 rounded-md p-2 bg-white"},[l.商品信息.商品图片列表?.length?(p(),h("img",{key:0,src:l.商品信息.商品图片列表[0],class:"w-full h-32 object-contain mb-2"},null,8,jt)):B("",!0),c("div",{class:"font-medium mb-1 text-sm line-clamp-2",title:l.商品信息.商品标题},v(l.商品信息.商品标题),9,Bt),c("div",At,[c("span",Dt,v(l.商品信息.当前售价),1),c("span",Rt,v(l.商品信息.商品原价),1)]),c("div",Tt,"发货地: "+v(l.商品信息.发货地区),1),c("div",It,"卖家: "+v(l.卖家信息.卖家昵称),1),u(W),c("div",Lt,[c("div",null,[c("div",Et,"发布时间："+v(l.商品信息.发布时间),1),c("div",Vt,"抓取时间："+v(l.爬取时间),1)]),c("div",Nt,[c("a",{href:l.商品信息.商品链接,target:"_blank",class:"block mb-1"},"查看",8,Ut),c("div",{class:"cursor-pointer",onClick:Wt=>w(l.商品信息.商品ID)},"复制",8,Gt)])])]))),128))])):d(a)?B("",!0):(p(),h("div",Ht,"暂无结果"))]),_:1},8,["spinning"]),d(r)?(p(),j(F,{key:0,class:"mt-4",current:d(s).page,"onUpdate:current":i[3]||(i[3]=l=>d(s).page=l),"page-size":d(s).limit,"onUpdate:pageSize":i[4]||(i[4]=l=>d(s).limit=l),total:d(r).total,onChange:C},null,8,["current","page-size","total"])):B("",!0)])}}});export{Yt as default};
